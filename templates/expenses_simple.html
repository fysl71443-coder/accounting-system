{% extends "base_unified.html" %}

{% block title %}Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª - Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©{% endblock %}
{% block page_icon %}<i class="fas fa-receipt"></i>{% endblock %}
{% block page_title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª{% endblock %}

{% block content %}

<!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">ğŸ”§ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</h5>
        <div class="btn-group">
            <button type="button" class="btn btn-success" id="addExpenseBtn">
                <i class="fas fa-plus me-1"></i>Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ Ø¬Ø¯ÙŠØ¯
            </button>
            <button type="button" class="btn btn-warning" id="editExpenseBtn">
                <i class="fas fa-edit me-1"></i>ØªØ¹Ø¯ÙŠÙ„
            </button>
            <button type="button" class="btn btn-danger" id="deleteExpenseBtn">
                <i class="fas fa-trash me-1"></i>Ø­Ø°Ù
            </button>
            <button type="button" class="btn btn-info" id="exportExpenseBtn">
                <i class="fas fa-download me-1"></i>ØªØµØ¯ÙŠØ±
            </button>
            <button type="button" class="btn btn-secondary" id="printExpenseBtn">
                <i class="fas fa-print me-1"></i>Ø·Ø¨Ø§Ø¹Ø©
            </button>
        </div>
    </div>
</div>
<div class="alert alert-info">
    <h5>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø±</h5>
    <p>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø§Ø®ØªØ¨Ø§Ø±Ù‡Ø§</p>
    <div id="testResults"></div>
</div>

<!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª -->
<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>ØªØ­Ø¯ÙŠØ¯</th>
                        <th>Ø±Ù‚Ù… Ø§Ù„Ù…ØµØ±ÙˆÙ</th>
                        <th>Ø§Ù„ÙˆØµÙ</th>
                        <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody>
                    {% for expense in expenses %}
                    <tr>
                        <td>
                            <input type="radio" name="selected_expense" value="{{ expense.id }}" 
                                   data-expense-number="{{ expense.expense_number }}">
                        </td>
                        <td>{{ expense.expense_number }}</td>
                        <td>{{ expense.description }}</td>
                        <td>{{ "%.2f"|format(expense.amount) }} Ø±ÙŠØ§Ù„</td>
                        <td>{{ expense.date.strftime('%Y-%m-%d') if expense.date else '-' }}</td>
                        <td>
                            {% if expense.payment_status == 'paid' %}
                                <span class="badge bg-success">Ù…Ø¯ÙÙˆØ¹</span>
                            {% else %}
                                <span class="badge bg-danger">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø´Ø§Ø´Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©...');

// Ø¯ÙˆØ§Ù„ Ø¨Ø³ÙŠØ·Ø© Ø¬Ø¯Ø§Ù‹
function addExpense() {
    console.log('â• Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ');
    alert('âœ… Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙŠØ¹Ù…Ù„!');
    document.getElementById('testResults').innerHTML += '<div>âœ… Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙŠØ¹Ù…Ù„</div>';
}

function editExpense() {
    console.log('âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ù…ØµØ±ÙˆÙ');
    const selected = document.querySelector('input[name="selected_expense"]:checked');
    if (selected) {
        alert('âœ… Ø²Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¹Ù…Ù„! Ø§Ù„Ù…ØµØ±ÙˆÙ Ø§Ù„Ù…Ø­Ø¯Ø¯: ' + selected.value);
        document.getElementById('testResults').innerHTML += '<div>âœ… Ø²Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¹Ù…Ù„ - Ø§Ù„Ù…ØµØ±ÙˆÙ: ' + selected.value + '</div>';
    } else {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ù…ØµØ±ÙˆÙ Ø£ÙˆÙ„Ø§Ù‹');
        document.getElementById('testResults').innerHTML += '<div>âš ï¸ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ØµØ±ÙˆÙ</div>';
    }
}

function deleteExpense() {
    console.log('ğŸ—‘ï¸ Ø­Ø°Ù Ù…ØµØ±ÙˆÙ');
    const selected = document.querySelector('input[name="selected_expense"]:checked');
    if (selected) {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) {
            alert('âœ… Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙŠØ¹Ù…Ù„! Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ: ' + selected.value);
            document.getElementById('testResults').innerHTML += '<div>âœ… Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙŠØ¹Ù…Ù„ - Ø§Ù„Ù…ØµØ±ÙˆÙ: ' + selected.value + '</div>';
        }
    } else {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ù…ØµØ±ÙˆÙ Ø£ÙˆÙ„Ø§Ù‹');
        document.getElementById('testResults').innerHTML += '<div>âš ï¸ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ØµØ±ÙˆÙ Ù„Ù„Ø­Ø°Ù</div>';
    }
}

function exportExpenses() {
    console.log('ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');
    alert('âœ… Ø²Ø± Ø§Ù„ØªØµØ¯ÙŠØ± ÙŠØ¹Ù…Ù„!');
    document.getElementById('testResults').innerHTML += '<div>âœ… Ø²Ø± Ø§Ù„ØªØµØ¯ÙŠØ± ÙŠØ¹Ù…Ù„</div>';
}

function printExpenses() {
    console.log('ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª');
    alert('âœ… Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙŠØ¹Ù…Ù„!');
    document.getElementById('testResults').innerHTML += '<div>âœ… Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙŠØ¹Ù…Ù„</div>';
}

// Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ”— Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø±...');
    
    document.getElementById('addExpenseBtn').addEventListener('click', addExpense);
    document.getElementById('editExpenseBtn').addEventListener('click', editExpense);
    document.getElementById('deleteExpenseBtn').addEventListener('click', deleteExpense);
    document.getElementById('exportExpenseBtn').addEventListener('click', exportExpenses);
    document.getElementById('printExpenseBtn').addEventListener('click', printExpenses);
    
    console.log('âœ… ØªÙ… Ø±Ø¨Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±');
    document.getElementById('testResults').innerHTML = '<div class="badge bg-success">âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙˆØ±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø±</div>';
});
</script>
{% endblock %}
