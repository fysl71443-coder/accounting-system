#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ ุงูุจุณูุทุฉ ุงูุฌุฏูุฏุฉ
Test New Simple Print
"""

import requests
import webbrowser
import time

def test_simple_print():
    """ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ ุงูุจุณูุทุฉ"""
    print("๐จ๏ธ ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ ุงูุจุณูุทุฉ ุงูุฌุฏูุฏุฉ")
    print("=" * 50)
    
    # ูุญุต ุงูุฎุงุฏู
    try:
        response = requests.get("http://localhost:5000", timeout=5)
        print("โ ุงูุฎุงุฏู ูุนูู")
    except:
        print("โ ุงูุฎุงุฏู ูุง ูุนูู")
        print("๐ก ุดุบู ุงูุฎุงุฏู: python app.py")
        return False
    
    # ุชุณุฌูู ุงูุฏุฎูู
    session = requests.Session()
    try:
        login_data = {'username': 'admin', 'password': 'admin123'}
        response = session.post("http://localhost:5000/login", data=login_data)
        if response.status_code == 200:
            print("โ ุชู ุชุณุฌูู ุงูุฏุฎูู")
        else:
            print("โ ูุดู ุชุณุฌูู ุงูุฏุฎูู")
            return False
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู: {e}")
        return False
    
    # ูุญุต ุตูุญุฉ ุงููุฏููุนุงุช
    try:
        response = session.get("http://localhost:5000/payments_dues")
        if response.status_code == 200:
            print("โ ุตูุญุฉ ุงููุฏููุนุงุช ุชุนูู")
            
            content = response.text
            
            # ูุญุต ุฃุฒุฑุงุฑ ุงูุทุจุงุนุฉ ุงูุฌุฏูุฏุฉ
            print("\n๐ ูุญุต ุฃุฒุฑุงุฑ ุงูุทุจุงุนุฉ ุงูุฌุฏูุฏุฉ:")
            
            if 'printSalesInvoices()' in content:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงููุจูุนุงุช ููุฌูุฏ")
            else:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงููุจูุนุงุช ุบูุฑ ููุฌูุฏ")
            
            if 'printPurchasesInvoices()' in content:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงููุดุชุฑูุงุช ููุฌูุฏ")
            else:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงููุดุชุฑูุงุช ุบูุฑ ููุฌูุฏ")
            
            if 'printExpensesInvoices()' in content:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงููุตุฑููุงุช ููุฌูุฏ")
            else:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงููุตุฑููุงุช ุบูุฑ ููุฌูุฏ")
            
            if 'printPayrollInvoices()' in content:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงูุฑูุงุชุจ ููุฌูุฏ")
            else:
                print("โ ุฒุฑ ุทุจุงุนุฉ ุงูุฑูุงุชุจ ุบูุฑ ููุฌูุฏ")
            
            # ูุญุต ูุฌูุฏ ุงููุธุงุฆู JavaScript
            print("\n๐ ูุญุต ูุธุงุฆู JavaScript:")
            
            if 'function printSalesInvoices' in content:
                print("โ ูุธููุฉ ุทุจุงุนุฉ ุงููุจูุนุงุช ููุฌูุฏุฉ")
            else:
                print("โ ูุธููุฉ ุทุจุงุนุฉ ุงููุจูุนุงุช ุบูุฑ ููุฌูุฏุฉ")
            
            if 'function createPrintHTML' in content:
                print("โ ูุธููุฉ ุฅูุดุงุก HTML ููุทุจุงุนุฉ ููุฌูุฏุฉ")
            else:
                print("โ ูุธููุฉ ุฅูุดุงุก HTML ููุทุจุงุนุฉ ุบูุฑ ููุฌูุฏุฉ")
            
            if 'function openPrintWindow' in content:
                print("โ ูุธููุฉ ูุชุญ ูุงูุฐุฉ ุงูุทุจุงุนุฉ ููุฌูุฏุฉ")
            else:
                print("โ ูุธููุฉ ูุชุญ ูุงูุฐุฉ ุงูุทุจุงุนุฉ ุบูุฑ ููุฌูุฏุฉ")
            
            # ูุญุต ุนุฏู ูุฌูุฏ ุงูููุงูุฐ ุงูููุจุซูุฉ ุงููุฏููุฉ
            print("\n๐ ูุญุต ุญุฐู ุงูููุงูุฐ ุงูููุจุซูุฉ ุงููุฏููุฉ:")
            
            if 'printModal' not in content:
                print("โ ุชู ุญุฐู ุงููุงูุฐุฉ ุงูููุจุซูุฉ ุงููุฏููุฉ")
            else:
                print("โ๏ธ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ุงููุฏููุฉ ูุง ุชุฒุงู ููุฌูุฏุฉ")
            
            if 'openPrintModal' not in content:
                print("โ ุชู ุญุฐู ูุธููุฉ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ุงููุฏููุฉ")
            else:
                print("โ๏ธ ูุธููุฉ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ุงููุฏููุฉ ูุง ุชุฒุงู ููุฌูุฏุฉ")
            
            return True
            
        else:
            print(f"โ ุตูุญุฉ ุงููุฏููุนุงุช ูุดูุช: {response.status_code}")
            return False
            
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ูุญุต ุตูุญุฉ ุงููุฏููุนุงุช: {e}")
        return False

def main():
    """ุงููุธููุฉ ุงูุฑุฆูุณูุฉ"""
    print("๐งช ุงุฎุชุจุงุฑ ุดุงูู ููุทุจุงุนุฉ ุงูุจุณูุทุฉ ุงูุฌุฏูุฏุฉ")
    print("=" * 60)
    
    # ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ ุงูุจุณูุทุฉ
    if not test_simple_print():
        print("โ ูุดู ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ ุงูุจุณูุทุฉ")
        return
    
    # ูุชุญ ุงููุชุตูุญ ููุงุฎุชุจุงุฑ ุงููุฏูู
    print("\n๐ ูุชุญ ุงููุชุตูุญ ููุงุฎุชุจุงุฑ ุงููุฏูู...")
    webbrowser.open("http://localhost:5000/payments_dues")
    
    print("\n" + "=" * 60)
    print("๐ ููุฎุต ุงูุงุฎุชุจุงุฑ:")
    print("=" * 60)
    
    print("๐ ุชู ุฅูุฌุงุฒ ุงูุชุญุฏูุซ ุจูุฌุงุญ!")
    print("โ ุชู ุญุฐู ุงูููุงูุฐ ุงูููุจุซูุฉ ุงููุนูุฏุฉ")
    print("โ ุชู ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุทุจุงุนุฉ ุจุณูุทุฉ ููู ูุณู")
    print("โ ุชู ุฅุถุงูุฉ ูุธุงุฆู JavaScript ููุทุจุงุนุฉ ุงููุจุงุดุฑุฉ")
    
    print("\n๐ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู:")
    print("1. ุชุณุฌูู ุงูุฏุฎูู: admin / admin123")
    print("2. ุงุฐูุจ ุฅูู ุฃู ุชุจููุจ (ูุจูุนุงุชุ ูุดุชุฑูุงุชุ ูุตุฑููุงุชุ ุฑูุงุชุจ)")
    print("3. ุงุถุบุท ุฒุฑ 'ุทุจุงุนุฉ ููุงุชูุฑ [ุงุณู ุงููุณู]'")
    print("4. ุณุชูุชุญ ูุงูุฐุฉ ุฌุฏูุฏุฉ ูุน ุงูููุงุชูุฑ ูู ุดูู ุตููู")
    print("5. ุณุชุจุฏุฃ ุงูุทุจุงุนุฉ ุชููุงุฆูุงู")
    
    print("\n๐ ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ:")
    print("- ุทุจุงุนุฉ ูุจุงุดุฑุฉ ุจุฏูู ููุงูุฐ ููุจุซูุฉ ูุนูุฏุฉ")
    print("- ุนุฑุถ ุงูููุงุชูุฑ ูู ุดูู ุตููู ุชุญุช ุจุนุถูุง")
    print("- ุชุตููู ุจุณูุท ูููุงุณุจ ููุทุจุงุนุฉ")
    print("- ุญุณุงุจ ุงููุฌุงููุน ูุงูุฅุญุตุงุฆูุงุช ุชููุงุฆูุงู")
    print("- ุฃุฒุฑุงุฑ ููููุฉ ูููุฒุฉ ููู ูุณู")
    
    print("\n๐ ุงูุฑุงุจุท:")
    print("http://localhost:5000/payments_dues")
    
    print("=" * 60)
    
    input("\nุงุถุบุท Enter ุจุนุฏ ุงูุชูุงุก ุงูุงุฎุชุจุงุฑ...")

if __name__ == "__main__":
    main()
