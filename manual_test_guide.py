#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
دليل الاختبار اليدوي الشامل للأزرار
Manual Testing Guide for All Buttons
"""

import webbrowser
import time

def create_test_checklist():
    """إنشاء قائمة اختبار شاملة"""
    
    checklist = {
        "🔐 اختبار تسجيل الدخول": [
            "✅ فتح الصفحة الرئيسية http://localhost:5000",
            "✅ إدخال المستخدم: admin",
            "✅ إدخال كلمة المرور: admin123",
            "✅ النقر على زر تسجيل الدخول",
            "✅ التحقق من الانتقال للوحة التحكم"
        ],
        
        "📋 اختبار القائمة الجانبية": [
            "✅ التحقق من ظهور القائمة الجانبية",
            "✅ النقر على 'لوحة التحكم' - يجب الانتقال لـ /dashboard",
            "✅ النقر على '🌟 إدارة المنتجات والتكاليف' - يجب الانتقال لـ /unified_products",
            "✅ النقر على 'فاتورة جديدة' - يجب الانتقال لـ /new_sale",
            "✅ النقر على 'المبيعات' - يجب الانتقال لـ /sales",
            "✅ التحقق من التصميم المميز للشاشة الموحدة (ذهبي مع تأثير النبض)"
        ],
        
        "🏠 اختبار لوحة التحكم": [
            "✅ التحقق من عرض بطاقات الإحصائيات",
            "✅ النقر على بطاقة 'فاتورة جديدة'",
            "✅ النقر على بطاقة 'إدارة المنتجات والتكاليف'",
            "✅ النقر على بطاقة 'المبيعات'",
            "✅ النقر على بطاقة 'العملاء'",
            "✅ النقر على بطاقة 'الموردين'",
            "✅ التحقق من عرض الرسوم البيانية (إن وجدت)"
        ],
        
        "🌟 اختبار الشاشة الموحدة - تبويب المواد الخام": [
            "✅ الانتقال لـ http://localhost:5000/unified_products",
            "✅ النقر على تبويب 'المواد الخام'",
            "✅ التحقق من عرض جدول المواد الخام",
            "✅ ملء حقل 'اسم المادة' بـ 'مادة اختبار'",
            "✅ ملء حقل 'الوحدة' بـ 'كيلو'",
            "✅ ملء حقل 'السعر' بـ '15.50'",
            "✅ ملء حقل 'الكمية المتوفرة' بـ '20'",
            "✅ ملء حقل 'الحد الأدنى' بـ '5'",
            "✅ ملء حقل 'المورد' بـ 'مورد اختبار'",
            "✅ النقر على زر 'حفظ المادة الخام'",
            "✅ التحقق من ظهور رسالة نجاح",
            "✅ التحقق من إضافة المادة للجدول"
        ],
        
        "🌟 اختبار الشاشة الموحدة - تبويب حساب التكاليف": [
            "✅ النقر على تبويب 'حساب التكاليف'",
            "✅ ملء حقل 'اسم المنتج' بـ 'منتج اختبار'",
            "✅ ملء حقل 'الوصف' بـ 'منتج تجريبي'",
            "✅ ملء حقل 'عدد الحصص' بـ '4'",
            "✅ اختيار 'الفئة' من القائمة المنسدلة",
            "✅ النقر على زر 'إضافة مكون'",
            "✅ اختيار مادة خام من القائمة المنسدلة",
            "✅ إدخال الكمية المطلوبة",
            "✅ التحقق من حساب التكلفة تلقائياً",
            "✅ إضافة مكون ثاني",
            "✅ التحقق من تحديث التكلفة الإجمالية",
            "✅ النقر على زر 'حساب التكلفة'",
            "✅ التحقق من عرض التكلفة لكل حصة",
            "✅ التحقق من السعر المقترح",
            "✅ النقر على زر 'حفظ التكلفة والمنتج'",
            "✅ التحقق من ظهور رسالة نجاح"
        ],
        
        "🌟 اختبار الشاشة الموحدة - تبويب المنتجات الجاهزة": [
            "✅ النقر على تبويب 'المنتجات الجاهزة'",
            "✅ التحقق من عرض جدول المنتجات",
            "✅ النقر على زر 'تحديث المنتجات'",
            "✅ التحقق من تحديث البيانات",
            "✅ التحقق من عرض تفاصيل كل منتج",
            "✅ التحقق من عرض التكلفة والسعر المقترح"
        ],
        
        "💰 اختبار شاشة المبيعات": [
            "✅ الانتقال لـ http://localhost:5000/new_sale",
            "✅ اختيار عميل من القائمة المنسدلة",
            "✅ البحث عن منتج",
            "✅ إضافة منتج للفاتورة",
            "✅ تعديل الكمية",
            "✅ التحقق من حساب الإجمالي",
            "✅ النقر على زر 'حفظ الفاتورة'",
            "✅ التحقق من ظهور رسالة نجاح"
        ],
        
        "📊 اختبار شاشة المبيعات المحفوظة": [
            "✅ الانتقال لـ http://localhost:5000/sales",
            "✅ التحقق من عرض قائمة المبيعات",
            "✅ البحث في المبيعات",
            "✅ فلترة المبيعات حسب التاريخ",
            "✅ عرض تفاصيل فاتورة",
            "✅ طباعة فاتورة (إن أمكن)"
        ],
        
        "🌐 اختبار تغيير اللغة": [
            "✅ النقر على زر 'العربية'",
            "✅ التحقق من عرض النصوص بالعربية",
            "✅ النقر على زر 'English'",
            "✅ التحقق من عرض النصوص بالإنجليزية",
            "✅ العودة للعربية"
        ],
        
        "🚪 اختبار تسجيل الخروج": [
            "✅ النقر على زر 'تسجيل الخروج'",
            "✅ التحقق من الانتقال لصفحة تسجيل الدخول",
            "✅ التحقق من مسح بيانات الجلسة"
        ]
    }
    
    return checklist

def print_test_checklist():
    """طباعة قائمة الاختبار"""
    print("🧪 دليل الاختبار اليدوي الشامل لجميع أزرار النظام")
    print("=" * 70)
    print("📍 الرابط: http://localhost:5000")
    print("👤 المستخدم: admin | كلمة المرور: admin123")
    print("🌟 الشاشة الموحدة: http://localhost:5000/unified_products")
    print("=" * 70)
    
    checklist = create_test_checklist()
    
    for section, tests in checklist.items():
        print(f"\n{section}")
        print("-" * 50)
        for i, test in enumerate(tests, 1):
            print(f"{i:2d}. {test}")
    
    print("\n" + "=" * 70)
    print("📋 تعليمات الاختبار:")
    print("1. شغل التطبيق أولاً: python run_fixed.py")
    print("2. افتح المتصفح واذهب للرابط المذكور")
    print("3. اتبع كل خطوة في القائمة أعلاه")
    print("4. ضع علامة ✅ أمام كل اختبار ناجح")
    print("5. ضع علامة ❌ أمام كل اختبار فاشل")
    print("6. سجل أي ملاحظات أو أخطاء")
    print("=" * 70)
    
    print("\n🎯 نقاط التركيز المهمة:")
    print("• تأكد من عمل جميع الأزرار")
    print("• تحقق من ظهور رسائل النجاح/الخطأ")
    print("• اختبر التفاعل بين الشاشات")
    print("• تأكد من حفظ البيانات بشكل صحيح")
    print("• اختبر الاستجابة في حالات الخطأ")
    
    print("\n📊 معايير النجاح:")
    print("✅ جميع الأزرار تستجيب للنقر")
    print("✅ جميع النماذج تحفظ البيانات")
    print("✅ التنقل بين الشاشات يعمل")
    print("✅ رسائل التأكيد تظهر")
    print("✅ البيانات تظهر بشكل صحيح")

def create_test_report_template():
    """إنشاء قالب تقرير الاختبار"""
    
    report_template = """
# تقرير الاختبار اليدوي
## Manual Testing Report

**التاريخ**: ___________
**المختبر**: ___________
**نسخة النظام**: 2.0

---

## نتائج الاختبار:

### 🔐 تسجيل الدخول:
- [ ] فتح الصفحة الرئيسية
- [ ] إدخال بيانات المستخدم
- [ ] تسجيل الدخول بنجاح
**ملاحظات**: ________________

### 📋 القائمة الجانبية:
- [ ] ظهور القائمة
- [ ] جميع الروابط تعمل
- [ ] التصميم المميز للشاشة الموحدة
**ملاحظات**: ________________

### 🌟 الشاشة الموحدة:
- [ ] تبويب المواد الخام
- [ ] تبويب حساب التكاليف
- [ ] تبويب المنتجات الجاهزة
- [ ] جميع الوظائف تعمل
**ملاحظات**: ________________

### 💰 شاشة المبيعات:
- [ ] إنشاء فاتورة جديدة
- [ ] إضافة منتجات
- [ ] حفظ الفاتورة
**ملاحظات**: ________________

---

## التقييم النهائي:
- **نسبة النجاح**: ____%
- **الحالة العامة**: [ ] ممتاز [ ] جيد [ ] يحتاج تحسين
- **جاهز للإنتاج**: [ ] نعم [ ] لا

## التوصيات:
_________________________________
_________________________________
_________________________________
"""
    
    with open('TEST_REPORT_TEMPLATE.md', 'w', encoding='utf-8') as f:
        f.write(report_template)
    
    print("📄 تم إنشاء قالب تقرير الاختبار: TEST_REPORT_TEMPLATE.md")

def main():
    """الوظيفة الرئيسية"""
    print_test_checklist()
    print("\n" + "=" * 70)
    create_test_report_template()
    
    print("\n🚀 خطوات البدء:")
    print("1. شغل الأمر: python run_fixed.py")
    print("2. افتح المتصفح: http://localhost:5000")
    print("3. ابدأ الاختبار باتباع القائمة أعلاه")
    print("4. املأ قالب التقرير: TEST_REPORT_TEMPLATE.md")

if __name__ == "__main__":
    main()
